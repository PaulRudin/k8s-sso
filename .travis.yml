language: python
services:
- docker
python:
- '3.7'
before_install:
- openssl aes-256-cbc -K $encrypted_5efe748433d5_key -iv $encrypted_5efe748433d5_iv
  -in k8s-ss0.repo.key.enc -out k8s-ss0.repo.key -d
- sudo apt-get install -y git-crypt
- git-crypt unlock k8s-ss0.repo.key
install:
- pip install pipenv
- pipenv install --dev
script:
- pytest
deploy:
  provider: script
  script: scripts/push.sh
env:
  global:
  - secure: h0LMTipPFluP3fqa7eTO/Yni3pFwzNBt26mdQLXpBqNALbbugxgdj3SksoA/MccX6xppAQ2LC4JpODfmraNGKM9dRKe77T4UvMZQrln2JpP8/KdRQ60Fu7ehvm7VB+ZYObCG9zy3qvPEzJR+npsowCeU3S/1fcu+3lfa4gB0J58ZyCKEODl6zGXb/Wk3wIo79QdJFPitD77eHHvCKjQJm1IR0I1TDUlKPpfGIdrAXHsrYoDBOWfUkr8ffvwDnBi/33rMyMN9LO8GQRDRLssxPlLPo9i1gb3mHya38P/h0tKjONseFrrjAJ/QjMvr+PxMWZRil1xX0Pn+K58H8VrR4OfjP64gD9AyKPalWl1nWeiUFFtxCIilmUt0HCN6cUO8IpHMfxqxWjTmhNRbehLKo569W6LEdR5Fgd/2seGH1240C2Ve92RTN/XwLggvqXydgnWLVnUjCg2aKv24xJAvxvDmpc1LtRoLHLHNfn8BIl6u18/cAIib/fNJ7UXjny7gTX7Z/yRgj5K+wsH5ES374wlrdDkaGI0yfdtTBVfeXhxJJuZ3GvsPhBog3B2j9QPpJcmt3fxMD3KEg8+kx3tAnRX/rq7x7Hrn8ew+Fy02c9ePsF6mPVyzwcp5fsAG525PDPohSX9zQwlndM4DDLU8+hP9065J8o3z1t/OiJayKlk=
  - secure: F22WhobUmnuxQzdhkQyAksQ2XsHuAav5cnKIik89pGqvXxSgYNcJJHRXoF7fkm+8dvbC/GgkmsoZ5+CxnX6bhD2OBD+VW9DlwpT0eN5FoQoAxbUfB+uIdOlfD0FoIztzBfuHwawLyZCbY9ziOiO6IPpYxrJQ0DoM7oNbOQ+cf/pOf1f1Orjxd/zxv7fWRuATYpWbSeBeY9hI1TEb5A9A3FywqrNacYClw0Xw8sWmbzp2a/soXnHpxJISpHEhG5lG9ZNWSwTCSy4JZSp3s7ctQcj6UXU17c1FJ3ePe7zyJhMJcGwBMsm+g7177PpZiELf8Rq2Un8S7D7nsG/ItND35w3wIkYJZaW4iOTeMqW/3Uu24jwULAYsV/YzigIcvl5k9cwO6qDkI4UAzkdR7DTX5YKt6xIFmcIRrvetGDO8HwXB/aS9Oi7l09cAA9MmJbEVGzY3mxMkrKUCml3FkKr3BBANPOO74KgSCIVhbXo6kQteuhOVzmqx4p4T+JPP33Ll4gWWZ56dHCs03/LZNG0Gv02s/BA3JWzw9ilnoCAGvSx2qZ/lWFAOtMLF3cms1QDKukeBfoAcPU1IQFU04+F8VrPxQyIAmXp3JGMeRTE/K0IsGIOy+25BULUrIqPh2VW/WbB1Ky1YSgRVSjuRY/+VHHk4VeUtlvCq5E+wPEDT5Ow=
  - secure: E6Z0+hJc7/U1JiuK1nv5dBrE7gizmumKrSH/mBLdMVuVkDzOQklJBAh8I4B9sPlCFM/XKZuK+rgWYpHx4TtnSu6Vqx6vXid4KD6WgoihxdesoPSmNYlK82c8ia91S9sN8tuG8An3ji5vgDGdDDL3+fBdO49KxDZdJrgFq9hWauR72kNOHqddZN63xDppSaRZ9eGFWGkqWXTFSRR9F9XRePgqW0kbkF2xpJeEfCI/U40JRoxixLPzYB8dyLYnv0lcNdwTD5SWatqxrloDDcQdOhkjNAcBcMsGIaidv2wuPD3KARSbc5JHyjs6tBhVmJiLsMySfDurR38YTQR2956BzqPJu4jtPx4vx3qHnwPWCIxfotcnmAY9SGzM3idIJRWJxtnQNZoLJCM1SwPgL6AH/C5+YZTmKctq3Rwr09v5m+mQtaC4BsDJRud6Li7gLlM+A+rJeX9bQZayF/SgxJEY5dYP1ygjeSIxlnsuuymczzXI/Ci0nQBuOFfcGDAdWCoOWvCNw1fIqwQWFfXI9uU8tqHtQGsVfCGW73kOKcc96K2qP65pr6u9JLipA3uR5waW+r7qXwcsRlUy1Jt1cZzOK++FEKXZkyOkVqBEWycgYwBm1RWHfZiRlEpkX1hDPWZTycHnGHCAG5+bDwv/3MLN8Qr8VPXkZ0c/R+aEOv9ZfpQ=
  - secure: 0HFxYkyWF7ivkj9u28QEMkJLAoj3A87Rszz//gJdnHzqq+Nl5FKaKnHtDWvqYqZWfZFLe1dIvSYBvpMyU1AUfOEDoYSazx1Ov52yjx1/cE5LQKuReoFLh1oMLTDacqEDV3wHyar6ep3jDAbCds2lB3x0+h+Iv9MczyyR6LecwnWrxYKBXEqn8mtIOW7Kog6rUgFE6ZuPnd03kOkzYP0EaCWkfDwUZNYTXwRQW8Y1Cioy8dIJY/Ixm8b7gddVSo7kdS+agpYvWvSHVLatKj/mWZqbdk8pvoFO91ZvcOsCgL0y84Zcg/Gu5VmEJOMOxIB5T0exK+9UxVKv4lhsoOyDEqtwpahwPhreITifw+tlUAQuc1KhdbMKvsQkmbFyY/PuYWw6YfpnxSoEa0Rk8AAxv/kpQl6z/59dMFs07zsZSs15fm2WqHgtiBHkatSncCM2U4SDOy3Evcn0DT9JfHhkPb8yhWJHO+P6osa4OniDL6JRxkIf+t1pqeluMPM7ZRVOYAgm2fcSKR52Wk72ffdQulGJQ4uMQDpaFYrXr8+baODH9S4fiPoMappktGIWLJzH6ODDVXw+Yi3TFp4r45P70XdGFn/qbqef98Pc92OQ4My8kJqn6PHH/zkCIuh12DDq2nlnP3rfuVgTX4okgwfVZOkf2t9zLQraW7VQhA+9Hlc=
  - secure: eYnuF1km++Pb5Fw8G5MFZRqYSxCKzTGEOOpiMzPrjTUGqvmXUxfnVrVWxmpoFYMaSqyh/zMFuRkrmQ47ViG+xAliLq5RSQD1/e4E+P76J0xKsIK6yfcQknGCBrN4G/bcmZOdLt14lqPrXEhfu9s/AxI1CvOMHir0G828VVhoDhgMgM+s+D8naZNrg55AI66NGdvUty4nj2x9DfhIs93MfyA75MPckbZiE0MNaiQmsizm6g3GgMjHI15HSKU6iiwe6KFr6Klm2TtykptW78kQ5na5ao4HHUM69R6aA+ZkWN6VsX2jZco5yioc0xjZK0AEdw98HnSV6EpTFwbHPNzPbH6wn483TYWoGDwOlbDqBBvZ/2N1OksdzxT5uS7bqp+2r4ziFO8zQVFkI7l6ojB/UUjTUBp68XO0EzwVsw7OqKcv/hUKmK1inAlRV3RHkCqE9MrcZtFduthW6T7F88c/vjpTiielJx4J5DdAVm5dtKB5+pmmSMM4G5jHtC4ejlH6YRJRidLh+o/1TpMZqXuykLR6aZ6tZQMR8Lkbqv7sY+45EIerbKUlGREcC4yLDF1mH+C/hHYeYuAB9J3PlPv521wmZf88Yb3bQD7NpBWIVWGPc/EwPMRFDMDO1wZQBKn4+l0jA2ktNlHxma2nDyI7yDFZNh4j02aZQHhrcGK7Oqs=
  - secure: wcHesbItzUN0+ovOmMwkJCnra1T0iMSc8omnCR/Nmj4ihxMH4WR2EZD1nLSvH22FnYVfzRdGex1C7Q4EW4ykFZA7Ml7odA74K75x7e5glQqn1HaaMzScdSPVPuMc2A2jpgLHu12MOg+lrp15ElNFRIKmtJ8kHT4AewXjqSDnxvFOLgpDYsq+1yLL5EToj7/VX0XpwKX4fGD313/oOFA92eGwov4r0ISMv0WgSAuKKIFp/mGFcY/GvRQ3U56yRvCY6ofBlxiIkOqXSFhG/39dy4tscdNQ/Vd5lvupxpFpMIjZCrzymGRw6MdY0Lu+FJtWX5tfvYCsSdBecLvyu67yItYAqAMOmvK0sOAHMBKWfBfx0KvcMtAEX4ZuHvlWd7FZLMddOnYUDYAg1fToTovoBEOlwVImFxfMPyf5xDKL4W8MCCZ+GFaxcDzX8UfsYvD71AyQZW+5AQyVHUCnngbP0g+fRkIPVLNH6QzvrnZ3MLbPmamyRq0TgEMYRvbK85KJSxrJVt+cKtTL1rXLZY6XAJL54vrw20QN5+J1n3QxzzlGM61Joqd3HBNeVf3j1ysBkiIgpCylreiHLw9V6w57TTQk+aRqOE/2EMoUbUYvD5VJnneFk11xcCVm2Yz2sPG5hQLBiOWUCWi6cQvZWY21aEIaqlwV0YZaw+ay0U6r+Kc=
  - secure: mfwo575uaA3o1dyRvv8d7zoOLPgwLgsIWzlGUDZGX+o156okX6Oh5yNAtmSTR0lXanhavH4slxPblVEChjc3a1oL1z3ArziRQfHctljiJeOXGSpQQBBrVwA9EyW6OOSTmC7C2Bk2ClTdYCaeQnVKKrkMVh7qK3QIWgohNlsEEzbTBKI69rkwW0LY+fUgs8wimof/A15JLVSoL2XBy7AAubqX5NZH2TxeCwbDcFtzA8yX3M96bTiEiknYCxFEra+R8jGMrQRhVJBj6hLd/mUlQq/0AVOK6WOClMfQ7ondSA3uZq2NXH+1tBc1n8pYk1RAGmvyerA89cQpHAqqUXGzaGXGzguWoQgOGSOQAM8SBCKL7J1230xdk3Hf8ddUryHplzOReNzCHnDBkSxzlaZ5zN6RGujE+KSmEt0F6/oWI/bqIhFVC7JV6RADLfeVLpIUZwJ65h6aLRQns6BiFzBjGHAIZvS2DY67BQc66dO8PCjQ4VxzxVEaNzBoSLvrgpCYZzMDPK7jfw7sYEuOBLEtliEcxAauk+sqG+3cGDMQn14i92u5j4qctHgt69GFdwwkG3Wl3r7J82ZP+3yTMGK1Jhv2w6gNGN0glCbuety5Uhn7j+GB/AbFTn918J9F81kzRtp56tASsoYMvgJh2hBXMntOmGa69gH1+KbNxwdXA0w=
  - secure: Ml/QZSwV0aL60Ppq3z3WOD5f/47+10lsb5l607/nEKErZFGGYslWvtzIozdrDH4CSmF8NRwf+QPn5mJlwLrpqEZbzFP2oQv25LyltP2YisG+hIUJN68K39RQsqMdGIr9ZYHspG/2TcN6bSqGDrzKixcN3MT5lBN5PhZwgYcDZo+ZnduoZTTS79TWw8w1CeLyEbPfGu/3LwwGCDk9Ysn6s7lPOfKs77hYNZt40uRqbyDQV5KtvYazILkSzunuGWsodP15UTkWDyjS9Wxo9Jwh0UTQkHTj9rZs87Ov9T5lfMUIawYcWW66FFPQ7rehNWyJ/Hh9EgfhzzQUFZWUx04DNkdfEZAjdqLnwkByO+AvBw3069F+fSqz5CjHVXQ6A9CDXzF+BeJLdnI2G+yuDqhaJqRhUkC3nwlhfMWrwCzGWytn46q1OqPgBnOYYzyFgve0CKuui/z6mfn3QWNpeATJaQoAJaxYlXYpHggZriQkFhBpSbHQ/im092QCV2xDJCms+wc5Lonr86CtzMVoRhX8RBv+BhoeLyA/NDK+sAj+84RPcwAo/gmFytPwFHSKV9ZatbywiPdQV2Uwz7Tnd32wOS/A5gwL8xSl0adVmSOHfn8zP/j597QbDdnfrb/lE1Qwz9zSvTokkS8F6u6nHU6dED0kclHKTr/PCMmHZfx2EtI=
